
![header](https://capsule-render.vercel.app/api?type=wave&color=C3E5AE&height=200&section=header&text=Spring&nbsp;Boot&nbsp;Study&fontSize=50&fontColor=000000)

## [9.4] 다대일, 일대다 매핑

### [9.4.1] 다대일 단방향 매핑

* **[예제-9.9] 공급업체 엔티티 클래스**
```java
   @Entity
   @Getter
   @Setter
   @NoArgsConstructor
   @ToString(callSuper = true)
   @EqualsAndHashCode(callSuper = true)
   @Table(name = "provider")
   public class Provider extends BaseEntity {
   
   @Id
   @GeneratedValue(Strategy = GenerationType.IDENTITY)
   private Long id;
   
   private String name;
   
   }
   ```   

* **[예제-9.10] 상품 엔티티와 공급업체 엔티티의 다대일 연관관계 설정**  

``` java
    @Entity
    @Getter
    @NoArgsConstructor
    @ToString(callSuper = true)
    @EqualsAndHashCode(callSuper = true)
    @Table(name = "productr")
    public class Product extends BaseEntity {
      @Id
      @GeneratedValue(Strategy = GenerationType.IDENTITY)
      private Long number;
      
      @Column(nullable = false)
      private String name;
      
      @Column(nullable = false)
      private Integer price;
      
      @Column(nullable = false)
      private Integer stock;
      
      @OneToOne(mappedBy = "product")
      @ToString.Exclude
      private ProductDetail productDeatil;
      
      @ManyToOne
      @JoinColumn(name = "provider_id")
      @ToString.Exclude
      private Provider provider;
      }
   ```   

* @ManyToOne , @JoinColumn 을 통해서 **다대일 연관관계를 설정**
* 상품 엔티티가 공급업체 엔티티의 주인 -> 일반적으로 외래키를 갖는 쪽이 **주인** 역할을 수행하기 때문  

* **[예제 9-12] Product, Provider 엔티티 연관관계 테스트**  

```java
  @SpringBootTest
  class ProviderRepositoryTest {
  
  @Autowired
  ProductRepository productRepository;
  
  @Autowired
  ProviderRepository providerRepository;
  
  @Test
  void relationshipTest1() {
   //테스트 데이터 생성
   Provider provider = new Provider();
   provider.setName("oo물산");
  
   providerRepository.save(provider);
  
   Product product = new Product();
   product.setName("가위");
   product.setPrice(5000);
   product.setStock(500);
   product.setProvider(provider);
  
   productRepository.save(product);
  
   //테스트
   System.out.println( "product : "+productRepository.findBy(1L).orElseThrow(RuntimeException::new));
   System.out.println("provider :" + productRepository.findById(1L).orElseThrow(RuntimeException::new).getProvider());
   }
  }
  
  
