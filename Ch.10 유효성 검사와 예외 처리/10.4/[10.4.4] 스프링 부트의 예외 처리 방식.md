![header](https://capsule-render.vercel.app/api?type=wave&color=C3E5AE&height=200&section=header&text=Spring&nbsp;Boot&nbsp;Study&fontSize=50&fontColor=000000)
## [10.4.4] ìŠ¤í”„ë§ ë¶€íŠ¸ì˜ ì˜ˆì™¸ ì²˜ë¦¬ ë°©ì‹

```
ğŸ’¡ ì˜ˆì™¸ê°€ ë°œìƒí–ˆì„ ë•Œ í´ë¼ì´ì–¸íŠ¸ì— ì˜¤ë¥˜ ë©”ì„¸ì§€ë¥¼ ì „ë‹¬í•˜ë ¤ë©´, ê° ë ˆì´ì–´ì—ì„œ ë°œìƒí•œ ì˜ˆì™¸ë¥¼ ì—”ë“œí¬ì¸íŠ¸ ë ˆë²¨ì¸ ì»¨íŠ¸ë¡¤ëŸ¬ë¡œ ì „ë‹¬í•´ì•¼ í•œë‹¤.
```  

:point_right: **ìŠ¤í”„ë§ ë¶€íŠ¸ ì˜ˆì™¸ ì²˜ë¦¬ ë°©ì‹ 2ê°€ì§€**  

:white_check_mark: @(Rest)ControllerAdvice ì™€ @ExceptionHandlerë¥¼ í†µí•´ ëª¨ë“  ì»¨íŠ¸ë¡¤ëŸ¬ì˜ ì˜ˆì™¸ë¥¼ ì²˜ë¦¬  

:white_check_mark: @ExceptionHandler ë¥¼ í†µí•´ íŠ¹ì • ì»¨íŠ¸ë¡¤ëŸ¬ì˜ ì˜ˆì™¸ë¥¼ ì²˜ë¦¬  

:bulb:@ControllerAdvice ëŒ€ì‹  @RestControllerAdviceë¥¼ ì‚¬ìš©í•˜ë©´ **ê²°ê´ê°’ì„ JSON í˜•íƒœë¡œ ë°˜í™˜í•  ìˆ˜ ìˆìŒ.** 

### @RestControllerfmf í™œìš©í•œ ì»¨íŠ¸ë¡¤ëŸ¬ì˜ ì˜ˆì™¸ ì²˜ë¦¬
##

:white_check_mark: **[ì˜ˆì œ 10.11] CustomExceptionHandler í´ë˜ìŠ¤** 

 ``` java
 @RestControllerAdvice (basePackages = "com.springboot.valid_exception")
    public class CustomExceptionHandler {

    private final Logger LOGGER = LoggerFactory.getLogger(CustomExceptionHandler.class);

    @ExceptionHandler(value = RuntimeException.class)
    public ResponseEntity<Map<String, String>> handleException(RuntimeException e,
        HttpServletRequest request) {
        HttpHeaders responseHeaders = new HttpHeaders();
        HttpStatus httpStatus = HttpStatus.BAD_REQUEST;

        LOGGER.error("Advice ë‚´ exceptionHandler í˜¸ì¶œ, {}, {}", request.getRequestURI(),
            e.getMessage());

        Map<String, String> map = new HashMap<>();
        map.put("error type", httpStatus.getReasonPhrase());
        map.put("code", "400");
        map.put("message", e.getMessage());

        return new ResponseEntity<>(map, responseHeaders, httpStatus);
     }
    }
 
 ```
 :heavy_check_mark: @RestContollerAdvice , @ControllerAdvice ëŠ” **@Controller ë‚˜ @RestController ì—ì„œ ë°œìƒí•˜ëŠ” ì˜ˆì™¸ë¥¼ í•œ ê³³ì—ì„œ ê´€ë¦¬í•˜ê³  ì²˜ë¦¬í•  ìˆ˜ ìˆê²Œ í•˜ëŠ” ê¸°ëŠ¥ ìˆ˜í–‰**  

:round_pushpin: ë³„ë„ ì„¤ì •ì„ í†µí•´ **ì˜ˆì™¸ë¥¼ ê´€ì œí•˜ëŠ” ë²”ìœ„ë¥¼ ì§€ì •í•  ìˆ˜ ìˆìŒ**
```java
  @RestControllerAdvice (basePackages = "com.springboot.valid_exception")
```

:heavy_check_mark: @ExceptionHandler ëŠ” **@Controller ë‚˜ @RestController ê°€ ì ìš©ëœ ë¹ˆì—ì„œ ë°œìƒí•˜ëŠ” ì˜ˆì™¸ë¥¼ ì¡ì•„ ì²˜ë¦¬í•˜ëŠ” ë©”ì„œë“œë¥¼ ì •ì˜**í•  ë•Œ ì‚¬ìš©  


:point_right: **ì–´ë–¤ ì˜ˆì™¸ í´ë˜ìŠ¤ë¥¼ ì²˜ë¦¬í• ì§€ëŠ” value ì†ì„±ìœ¼ë¡œ ë“±ë¡í•˜ë©°**, value ì†ì„±ì€ ë°°ì—´ì˜ í˜•ì‹ìœ¼ë¡œë„ ì „ë‹¬ ë°›ì„ ìˆ˜ë„ ìˆì–´ ì—¬ëŸ¬ ì˜ˆì™¸ í´ë˜ìŠ¤ë¥¼ ë“±ë¡í•  ìˆ˜ë„ ìˆìŒ. 
``` java
    // RuntimeExceptionì— í¬í•¨ë˜ëŠ” ê°ì¢… ì˜ˆì™¸ê°€ ë°œìƒí•  ê²½ìš°ë¥¼ í¬ì°©í•´ì„œ ì²˜ë¦¬
    @ExceptionHandler(value = RuntimeException.class)
```

:heavy_check_mark: í´ë¼ì´ì–¸íŠ¸ì—ê²Œ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆë‹¤ëŠ” ì‘ë‹µë©”ì„¸ì§€ êµ¬ì„±
```java
    HttpHeaders responseHeaders = new HttpHeaders();
        HttpStatus httpStatus = HttpStatus.BAD_REQUEST;

        LOGGER.error("Advice ë‚´ exceptionHandler í˜¸ì¶œ, {}, {}", request.getRequestURI(),
            e.getMessage());

        Map<String, String> map = new HashMap<>();
        map.put("error type", httpStatus.getReasonPhrase());
        map.put("code", "400");
        map.put("message", e.getMessage());

        return new ResponseEntity<>(map, responseHeaders, httpStatus);
```
:point_right: ì»¨íŠ¸ë¡¤ëŸ¬ì˜ ë©”ì„œë“œì— ë‹¤ë¥¸ íƒ€ì…ì˜ ë¦¬í„´ì´ ì„¤ì •ë¼ ìˆì–´ë„, **í•¸ë“¤ëŸ¬ ë©”ì„œë“œì—ì„œ ë³„ë„ì˜ ë¦¬í„´ íƒ€ì…ì„ ì§€ì •í•  ìˆ˜ ìˆë‹¤.**

##
:white_check_mark: **[ì˜ˆì œ 10.12] ExceptionController í´ë˜ìŠ¤**
```java
@RestController
@RequestMapping("/exception")
public class ExceptionController {

    private final Logger LOGGER = LoggerFactory.getLogger(ExceptionController.class);

    @GetMapping
    public void getRuntimeException() {
        throw new RuntimeException("getRuntimeException ë©”ì†Œë“œ í˜¸ì¶œ");
    }
  }
```
* getRumtimeExcpetion() ë©”ì„œë“œëŠ” ì»¨íŠ¸ë¡¤ëŸ¬ë¡œ ìš”ì²­ì´ ë“¤ì–´ì˜¤ë©´ RuntimeExceptionì„ ë°œìƒì‹œí‚¨ë‹¤.  


```
âœ¨ ì»¨íŠ¸ë¡¤ëŸ¬ì—ì„œ ë˜ì§„ ì˜ˆì™¸ëŠ” @ControllerAdvice ë˜ëŠ” @RestControllerAdviceê°€ ì„ ì–¸ë¼ ìˆëŠ” í•¸ë“¤ëŸ¬ í´ë˜ìŠ¤ì—ì„œ ë§¤í•‘ëœ ì˜ˆì™¸ íƒ€ì…ì„ ì°¾ì•„ ì²˜ë¦¬í•˜ê²Œ ë¨.
    â†’ ë‘ ì–´ë…¸í…Œì´ì…˜ì€ ë³„ë„ ë²”ìœ„ ì„¤ì •ì´ ì—†ìœ¼ë©´, ì „ì—­ ë²”ìœ„ì—ì„œ ì˜ˆì™¸ë¥¼ ì²˜ë¦¬í•¨.
```
##
:heavy_check_mark: **íŠ¹ì • ì»¨íŠ¸ë¡¤ëŸ¬ì—ì„œë§Œ ë™ì‘í•˜ëŠ” @ExceptionHandler**   

**[ì˜ˆì œ 10.13] ì»¨íŠ¸ë¡¤ëŸ¬ í´ë˜ìŠ¤ ë‚´ handleExcpetion()ìƒì„±**

```java
    @RestController
    @RequestMapping("/exception")
    public class ExceptionController {

    private final Logger LOGGER = LoggerFactory.getLogger(ExceptionController.class);

    @GetMapping
    public void getRuntimeException() {
        throw new RuntimeException("getRuntimeException ë©”ì†Œë“œ í˜¸ì¶œ");
    }

  
    @ExceptionHandler(value = RuntimeException.class)
    public ResponseEntity<Map<String, String>> handleException(RuntimeException e,
        HttpServletRequest request) {
        HttpHeaders responseHeaders = new HttpHeaders();
        responseHeaders.setContentType(MediaType.APPLICATION_JSON);
        HttpStatus httpStatus = HttpStatus.BAD_REQUEST;

        LOGGER.error("í´ë˜ìŠ¤ ë‚´ handleException í˜¸ì¶œ, {}, {}", request.getRequestURI(),
            e.getMessage());

        Map<String, String> map = new HashMap<>();
        map.put("error type", httpStatus.getReasonPhrase());
        map.put("code", "400");
        map.put("message", e.getMessage());

        return new ResponseEntity<>(map, responseHeaders, httpStatus);
    }
  }
``` 
* @ExceptionHandler ì–´ë…¸í…Œì´ì…˜ì„ ì‚¬ìš©í•œ ë©”ì„œë“œë¥¼ ì„ ì–¸í•˜ë©´ í•´ë‹¹ í´ë˜ìŠ¤ì— êµ­í•œí•´ì„œ ì˜ˆì™¸ ì²˜ë¦¬ë¥¼ í•  ìˆ˜ ìˆë‹¤.
##
 :heavy_check_mark: **í´ë˜ìŠ¤ì˜ ìš°ì„ ìˆœìœ„ ë¹„êµ**   


:point_right: @ControllerAdvice ì™€ ì»¨íŠ¸ë¡¤ëŸ¬ ë‚´ì— ë™ì¼í•œ ì˜ˆì™¸ íƒ€ì…ì„ ì²˜ë¦¬í•œë‹¤ë©´ **ì¢€ ë” ìš°ì„ ìˆœìœ„ê°€ ë†’ì€ í´ë˜ìŠ¤ ë‚´ì˜ í•¸ë“¤ëŸ¬ ë©”ì„œë“œê°€ ì‚¬ìš©ë¨**  


**1. ì˜ˆì™¸ íƒ€ì… ë ˆë²¨ì— ë”°ë¥¸ ì˜ˆì™¸ ì²˜ë¦¬ ìš°ì„ ìˆœìœ„**
* ì»¨íŠ¸ë¡¤ëŸ¬ ë˜ëŠ” @ControllerAdvice í´ë˜ìŠ¤ ë‚´ì— ë™ì¼í•˜ê²Œ í•¸ë“¤ëŸ¬ ë©”ì„œë“œê°€ ì„ ì–¸ëœ ìƒíƒœì—ì„œ, Excception í´ë˜ìŠ¤ì™€ ì¢€ ë” êµ¬ì²´ì ì¸ NullPointerException í´ë˜ìŠ¤ê°€ ê°ê° ì„ ì–¸ëœ ê²½ìš°, **êµ¬ì²´ì ì¸ í´ë˜ìŠ¤ê°€ ì§€ì •ëœ ìª½ì´ ìš°ì„ ìˆœìœ„ë¥¼ ê°–ê²Œ ë¨**  


**2. í•¸ë“¤ëŸ¬ ìœ„ì¹˜ì— ë”°ë¥¸ ì˜ˆì™¸ ì²˜ë¦¬ í›„ìˆœìœ„**  
* @ControllerAdvice ì˜ ê¸€ë¡œë²Œ ì˜ˆì™¸ ì²˜ë¦¬ì™€ @Controller ë‚´ì˜ ì»¨íŠ¸ë¡¤ëŸ¬ ì˜ˆì™¸ ì²˜ë¦¬ì— ë™ì¼í•œ íƒ€ì…ì˜ ì˜ˆì™¸ ì²˜ë¦¬ë¥¼ í•˜ê²Œ ëœë‹¤ë©´, **ë²”ìœ„ê°€ ì¢ì€ ì»¨íŠ¸ë¡¤ëŸ¬ì˜ í•¸ë“¤ëŸ¬ ë©”ì„œë“œê°€ ìš°ì„ ìˆœìœ„ë¥¼ ê°–ê²Œë¨**


 
