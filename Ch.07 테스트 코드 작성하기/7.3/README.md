# 7.3 테스트 코드를 작성하는 방법
***
'Given - When - Then' 패턴
<br>
'F.I.R.S.T' 전략
### 7.3.1
**Given - When - Then 패턴**

Given
: 테스트를 수행하기 전에 필요한 환경을 설정하는 단계로 테스트에 필요한 변수를 정의하거나 
Mock 객체를 통해 특정 상황에 대한 행동을 정의

When
: 테스트의 목적을 보여주는 단계로 실제 테스트 코드가 포함되며, 테스트를 통한 결괏값을 가져옴

Then
: 테스트의 결과를 검증하는 단계로 일반적으로 When 단계에서 나온 결괏값을 검증하는 작업을 수행하고 결괏값이 아니더라도 이 테스트를 통해 검증할 
부분이 있다면 이 단계에 포함시킴

```java

    @Test
    public void findAllTest() throws Exception {
            //given
            Item itemA = new Item("itemA", 10000, 10);
            Item itemB = new Item("itemB", 20000, 20);
            Item savedItemA = itemRepository.save(itemA);
            Item savedItemB = itemRepository.save(itemB);
            //when
            List<Item> result = itemRepository.findAll();

            //then
            assertThat(result.size()).isEqualTo(2);
            assertThat(result).contains(itemA, itemB);
    }
```
Given - When - Then
: 이 패턴은 불필요하게 코드가 길어지기 때문에 단위 테스트에는 잘 사용하지 않는다고 함
<br> 하지만 이 패턴을 통해 테스트 코드를 작성한다면 '명세'문서의 역할을 수행하는 측면에서 많은 도움이 될 수 있음 

***
### 7.3.2
**좋은 테스트를 작성하는 5가지 속성 (F.I.R.S.T)**

* 빠르게 (Fast)
    : **테스트는 빠르게 수행돼야 합니다.** 테스트 코드가 느리면 코드를 개선하는 작업이 느려져 코드 품질이 떨어질 수 있습니다. 테스트 속도에 
절대적인 기준은 없지만 목적을 단순하게 설정해서 작성하거나 외부 환경을 사용하지 않는 단위 테스트를 작성하는 것 등을 빠른 테스트라고 할 수 있습니다.

* 고립된, 독립적 (Isolated)
    : **하나의 테스트 코드는 목적으로 여기는 하나의 대상에 대해서만 수행돼야 합니다.** 하나의 테스트가 다른 테스트 코드와 상호작용하거나 관리할 수 
없는 외부 소스를 사용하게 되면 외부 요인으로 인해 테스트가 수행되지 않을 수 있습니다.

* 반복 가능한 (Repeatable) 
    : **테스트는 어떤 환경에서도 반복 가능하도록 작성해야 합니다.** Isolated 규칙과 비슷한 의미를 가지며, 테스트가 개발 환경이나 네트워크의 연결 
여부와 상관 없이 수행돼야 합니다.

* 자가 검증(Self-Validationg)
    : **테스트 그 자체만으로 테스트의 검증이 완료돼야 합니다.** 테스트가 성공했는지 실패했는지 확인할 수 있는 코드를 함께 작성해야 합니다.

* 적시에(Timely) 
    : **테스트 코드는 테스트하려는 애플리케이션 코드를 구현하기 전에 완성돼야 합니다.** 너무 늦게 작성된 테스트 코드는 정상적인 역할을 수행하기 
어려울 수 있으며 테스트 코드로 인해 발견된 문제를 해결하기 위해 소모되는 게발 비용도 커지기 쉽습니다. 
<br>
* **테스트 주도 개발의 원칙**을 따르는 테스트 작성 규칙입니다.